# NBU Knowledge Base System

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏ô‡∏≠‡∏£‡πå‡∏ó‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û (North Bangkok University Knowledge Management System)

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

- [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö)
- [‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å](#‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å)
- [‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö](#‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö)
- [‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á](#‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á)
- [‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö](#‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö)
- [‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö](#‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö)
- [‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤](#‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤)
- [API ‡πÅ‡∏•‡∏∞ Helper Functions](#api-‡πÅ‡∏•‡∏∞-helper-functions)

---

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ NBU ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö ‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏ô‡∏≠‡∏£‡πå‡∏ó‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û

### ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

- **Framework**: Laravel 11
- **Database**: PostgreSQL
- **Frontend**: Blade Templates, TailwindCSS, Alpine.js
- **Email**: Gmail SMTP
- **Authentication**: Laravel Breeze

---

## ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å

### 1. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° (Article Management)

- ‡∏™‡∏£‡πâ‡∏≤‡∏á ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå
- ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ó‡πá‡∏Å (Tags) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á
- ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á (View Count)

### 2. ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á (Advanced Visibility Levels)

‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 5 ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô:

| Visibility Level | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ | ‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á |
|-----------------|---------|-------------------|
| **Public** | ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞ | ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á login) |
| **Members Only** | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô | ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô (‡∏£‡∏ß‡∏°‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å) |
| **Staff Only** | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡∏†‡∏≤‡∏¢‡πÉ‡∏ô | ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏°‡∏µ Department ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô |
| **Internal** | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞ | ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô |
| **Private** | ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß | ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô |

#### ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Staff Only

```php
// ArticlePolicy.php - view method
case 'staff_only':
    // ‡∏ï‡πâ‡∏≠‡∏á login ‡πÅ‡∏•‡∏∞‡∏°‡∏µ department_id
    if (!$user) {
        return false;
    }
    return $user->department_id !== null;
```

### 3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏• (Email Verification)

- ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
- ‡πÉ‡∏ä‡πâ Gmail SMTP ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö < 100 ‡∏≠‡∏µ‡πÄ‡∏°‡∏•/‡∏ß‡∏±‡∏ô)
- UI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
- Admin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ
- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏î‡πâ‡∏ß‡∏¢ `verified` middleware

#### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Middleware

```php
// routes/web.php
Route::middleware(['auth', 'verified'])->group(function () {
    Route::post('/articles', [ArticleController::class, 'store']);
    Route::post('/bookmarks', [BookmarkController::class, 'store']);
});
```

### 4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (Settings Management)

‡∏£‡∏∞‡∏ö‡∏ö CMS-like ‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ Admin ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡πâ‡∏î

#### ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

- **General**: ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå, ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢, ‡πÇ‡∏•‡πÇ‡∏Å‡πâ, ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
- **Contact**: ‡∏≠‡∏µ‡πÄ‡∏°‡∏•, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà
- **Footer**: ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå, ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö
- **Social**: ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢ (Facebook, Twitter, YouTube, LINE)

#### ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Input Types

- `text` - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤
- `textarea` - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î
- `number` - ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
- `email` - ‡∏≠‡∏µ‡πÄ‡∏°‡∏•
- `url` - URL
- `image` - ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- `boolean` - Checkbox

#### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Helper Function

```blade
{{-- ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå Blade --}}
{{ setting('site_name', '‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô') }}
{{ setting('contact_email') }}

@if(setting('site_logo'))
    <img src="{{ asset(setting('site_logo')) }}" alt="Logo">
@endif
```

### 5. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó

#### ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (Roles)

- **Admin**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
- **Editor**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **Contributor**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á
- **Viewer**: ‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

#### ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ú‡∏ô‡∏Å (Department)

- ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ Department ‡πÑ‡∏î‡πâ 1 ‡πÅ‡∏ú‡∏ô‡∏Å
- ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÅ‡∏ö‡∏ö `staff_only` ‡πÅ‡∏•‡∏∞ `internal`
- Admin ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ú‡∏ô‡∏Å‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô Admin Dashboard

### 6. ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- **‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà**: ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
- **‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏∏‡πä‡∏Å‡∏°‡∏≤‡∏£‡πå‡∏Å**: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à
- **‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠, ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤, ‡πÅ‡∏ó‡πá‡∏Å
- **‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö**: ‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏Å‡∏±‡∏ö‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå
- **Responsive Design**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠

---

## ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### Server Requirements

- PHP >= 8.2
- PostgreSQL >= 13
- Composer
- Node.js ‡πÅ‡∏•‡∏∞ NPM
- Web Server (Apache/Nginx)

### PHP Extensions

```
- BCMath
- Ctype
- cURL
- DOM
- Fileinfo
- JSON
- Mbstring
- OpenSSL
- PCRE
- PDO
- PostgreSQL PDO Driver (pdo_pgsql)
- Tokenizer
- XML
```

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### 1. Clone Repository

```bash
git clone <repository-url>
cd kmsystem
```

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á PHP dependencies
composer install

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Node dependencies
npm install
```

### 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Environment

```bash
cp .env.example .env
```

### 4. ‡∏™‡∏£‡πâ‡∏≤‡∏á Application Key

```bash
php artisan key:generate
```

### 5. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Database

‡∏™‡∏£‡πâ‡∏≤‡∏á PostgreSQL database:

```sql
CREATE DATABASE kmsystem;
```

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env`:

```env
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=kmsystem
DB_USERNAME=your_username
DB_PASSWORD=your_password
```

### 6. ‡∏£‡∏±‡∏ô Migrations ‡πÅ‡∏•‡∏∞ Seeders

```bash
# ‡∏£‡∏±‡∏ô migrations
php artisan migrate

# ‡∏£‡∏±‡∏ô seeders ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
php artisan db:seed
```

Seeders ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:
- `AdminUserSeeder` - ‡∏™‡∏£‡πâ‡∏≤‡∏á admin user ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
- `DepartmentSeeder` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
- `CategorySeeder` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
- `SettingsSeeder` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô

### 7. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå

```bash
mkdir -p public/uploads/attachments
mkdir -p public/uploads/settings
chmod -R 775 public/uploads
```

### 8. ‡∏™‡∏£‡πâ‡∏≤‡∏á Symbolic Link ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Storage

```bash
php artisan storage:link
```

### 9. Build Assets

```bash
npm run build

# ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö development
npm run dev
```

### 10. ‡∏£‡∏±‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå

```bash
php artisan serve
```

‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà: `http://localhost:8000`

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö

### 1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏µ‡πÄ‡∏°‡∏• (Gmail SMTP)

#### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Gmail SMTP

1. **‡∏™‡∏£‡πâ‡∏≤‡∏á App Password ‡πÉ‡∏ô Gmail**:
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Google Account Settings ‚Üí Security
   - ‡πÄ‡∏õ‡∏¥‡∏î 2-Step Verification
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà "App passwords"
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á App password ‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Mail" ‡πÅ‡∏•‡∏∞ "Other")
   - ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å password 16 ‡∏´‡∏•‡∏±‡∏Å

2. **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env`**:

```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-16-digit-app-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="your-email@gmail.com"
MAIL_FROM_NAME="${APP_NAME}"
```

3. **Clear Config Cache**:

```bash
php artisan config:clear
php artisan cache:clear
```

#### ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•

```bash
php artisan tinker
```

```php
Mail::raw('Test email from KMS', function($message) {
    $message->to('test@example.com')->subject('Test Email');
});
```

#### ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á Gmail SMTP

- **‡∏ü‡∏£‡∏µ**: ‡∏™‡πà‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100 ‡∏≠‡∏µ‡πÄ‡∏°‡∏•/‡∏ß‡∏±‡∏ô
- ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å-‡∏Å‡∏•‡∏≤‡∏á
- ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: Amazon SES, SendGrid, Mailgun

### 2. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö (Database Settings)

Admin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:

```
Admin Dashboard ‚Üí System Settings
```

#### Best Practice: ‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà | ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á |
|-------------|---------|--------|---------|
| **Sensitive Data** | `.env` | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ | Database password, API keys, SMTP password |
| **Non-Sensitive Data** | Database | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô | Site name, Contact info, Footer text |

#### ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà

1. **‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô SettingsSeeder**:

```php
// database/seeders/SettingsSeeder.php
[
    'key' => 'my_new_setting',
    'value' => '‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô',
    'type' => 'text',
    'group' => 'general',
    'label' => '‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà',
    'description' => '‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤',
    'order' => 10,
]
```

2. **‡∏£‡∏±‡∏ô Seeder**:

```bash
php artisan db:seed --class=SettingsSeeder
```

3. **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î**:

```blade
{{ setting('my_new_setting', '‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô') }}
```

### 3. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Admin User ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô

User ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏≤‡∏Å `AdminUserSeeder`:

```
Email: admin@northbkk.ac.th
Password: password
Role: admin
```

**‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à!

---

## ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

### Database Schema

#### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å

**users**
- `id`, `name`, `email`, `password`
- `role` (admin, editor, contributor, viewer)
- `department_id` (FK ‚Üí departments)
- `email_verified_at`
- `is_active`

**articles**
- `id`, `title`, `slug`, `summary`, `content`
- `category_id` (FK ‚Üí categories)
- `user_id` (FK ‚Üí users)
- `visibility` (public, members_only, staff_only, internal, private)
- `status` (draft, published, archived)
- `views_count`
- `published_at`

**categories**
- `id`, `name`, `slug`, `description`, `icon`
- `parent_id` (self-referencing FK)
- `order`

**departments**
- `id`, `name`, `code`, `description`

**settings**
- `id`, `key`, `value`, `type`, `group`, `label`, `description`, `order`

**bookmarks**
- `id`, `user_id` (FK ‚Üí users)
- `article_id` (FK ‚Üí articles)

**attachments**
- `id`, `article_id` (FK ‚Üí articles)
- `filename`, `original_name`, `mime_type`, `size`, `path`

**tags** ‡πÅ‡∏•‡∏∞ **article_tag** (Many-to-Many)

### Models ‡πÅ‡∏•‡∏∞ Relationships

#### User Model

```php
class User extends Authenticatable implements MustVerifyEmail
{
    // Relationships
    public function department(): BelongsTo
    public function articles(): HasMany
    public function bookmarks(): HasMany

    // Helper Methods
    public function isAdmin(): bool
    public function isEditor(): bool
    public function isContributor(): bool
    public function canManageArticles(): bool
    public function canEditArticle(Article $article): bool
}
```

#### Article Model

```php
class Article extends Model
{
    // Relationships
    public function user(): BelongsTo
    public function category(): BelongsTo
    public function tags(): BelongsToMany
    public function attachments(): HasMany
    public function bookmarkedBy(): BelongsToMany

    // Scopes
    public function scopePublished($query)
    public function scopeVisible($query, ?User $user)

    // Helper Methods
    public function isPublic(): bool
    public function isMembersOnly(): bool
    public function isStaffOnly(): bool
    public function isInternal(): bool
    public function isPrivate(): bool
}
```

#### Setting Model

```php
class Setting extends Model
{
    // Static Methods
    public static function get(string $key, $default = null)
    public static function set(string $key, $value): void
    public static function getByGroup(string $group): array
    public static function clearCache(): void
}
```

### Policies (Authorization)

#### ArticlePolicy

```php
class ArticlePolicy
{
    public function view(?User $user, Article $article): bool
    {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏≤‡∏° visibility level
        switch ($article->visibility) {
            case 'public':
                return true; // ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏î‡∏π‡πÑ‡∏î‡πâ

            case 'members_only':
                return $user !== null; // ‡∏ï‡πâ‡∏≠‡∏á login

            case 'staff_only':
                return $user && $user->department_id !== null; // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ department

            case 'internal':
                return $user && $user->department_id === $article->user->department_id;

            case 'private':
                return $user && $user->id === $article->user_id;
        }
    }

    public function create(User $user): bool
    public function update(User $user, Article $article): bool
    public function delete(User $user, Article $article): bool
}
```

### Helper Functions

**SettingsHelper.php**

```php
// ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
setting(string $key, $default = null): mixed

// ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°
settings(string $group): array
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô**:

```blade
{{-- Navbar --}}
<span>{{ setting('site_name', 'Knowledge Base') }}</span>

{{-- Footer --}}
<p>{{ setting('footer_text', '¬© 2025 All rights reserved') }}</p>

{{-- Contact --}}
<a href="mailto:{{ setting('contact_email') }}">
    {{ setting('contact_email') }}
</a>

{{-- Homepage Hero --}}
<h1>{{ setting('home_hero_title') }}</h1>
<p>{{ setting('home_hero_subtitle') }}</p>
```

### Middleware

**verified** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•

```php
Route::middleware(['auth', 'verified'])->group(function () {
    // Routes ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•
});
```

### Caching Strategy

#### Settings Cache

- Cache TTL: 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (3600 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
- Cache Key Format: `setting_{key}`
- Auto-clear ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï

```php
// ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Setting::get()
Cache::remember("setting_{$key}", 3600, function () use ($key, $default) {
    $setting = static::where('key', $key)->first();
    return $setting ? $setting->value : $default;
});

// Clear cache ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï
Setting::set($key, $value); // ‡∏à‡∏∞ clear cache ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
Setting::clearCache(); // clear ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```

---

## ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤

### 1. ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö Visibility ‡πÉ‡∏´‡∏°‡πà

#### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:

**1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Database Enum**

‡∏™‡∏£‡πâ‡∏≤‡∏á Migration:

```php
// database/migrations/xxxx_add_new_visibility_level.php
public function up(): void
{
    DB::statement("ALTER TABLE articles ALTER COLUMN visibility DROP DEFAULT;");
    DB::statement("CREATE TYPE visibility_new AS ENUM ('public', 'members_only', 'staff_only', 'internal', 'private', 'new_level');");
    DB::statement("ALTER TABLE articles ALTER COLUMN visibility TYPE visibility_new USING visibility::text::visibility_new;");
    DB::statement("DROP TYPE IF EXISTS visibility;");
    DB::statement("ALTER TYPE visibility_new RENAME TO visibility;");
    DB::statement("ALTER TABLE articles ALTER COLUMN visibility SET DEFAULT 'public'::visibility;");
}
```

**2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Check Constraint**

```php
DB::statement('ALTER TABLE articles DROP CONSTRAINT IF EXISTS articles_visibility_check;');
DB::statement("ALTER TABLE articles ADD CONSTRAINT articles_visibility_check CHECK (visibility IN ('public', 'members_only', 'staff_only', 'internal', 'private', 'new_level'));");
```

**3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Article Model**

```php
// app/Models/Article.php
public function isNewLevel(): bool
{
    return $this->visibility === 'new_level';
}
```

**4. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï ArticlePolicy**

```php
// app/Policies/ArticlePolicy.php
public function view(?User $user, Article $article): bool
{
    switch ($article->visibility) {
        // ... existing cases
        case 'new_level':
            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á
            return $user && $user->someCondition;
    }
}
```

**5. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Controller Validation**

```php
// app/Http/Controllers/ArticleController.php
'visibility' => 'required|in:public,members_only,staff_only,internal,private,new_level',
```

**6. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Form View**

```blade
{{-- resources/views/articles/form.blade.php --}}
<option value="new_level">New Level - Description</option>
```

### 2. ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° Setting Group ‡πÉ‡∏´‡∏°‡πà

**1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï SettingsSeeder**

```php
// database/seeders/SettingsSeeder.php
[
    'key' => 'new_group_setting',
    'value' => 'default value',
    'type' => 'text',
    'group' => 'new_group',
    'label' => 'Label',
    'description' => 'Description',
    'order' => 1,
]
```

**2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï SettingsController**

```php
// app/Http/Controllers/Admin/SettingsController.php
public function index()
{
    $groups = ['general', 'contact', 'footer', 'social', 'new_group'];
    // ...
}
```

**3. ‡∏£‡∏±‡∏ô Seeder**

```bash
php artisan db:seed --class=SettingsSeeder
```

### 3. Best Practices

#### Security

- ‚úÖ ‡πÉ‡∏ä‡πâ Policy ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Authorization
- ‚úÖ Validate input ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- ‚úÖ ‡πÉ‡∏ä‡πâ Mass Assignment Protection (`$fillable`)
- ‚úÖ Hash ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢ `Hash::make()`
- ‚úÖ ‡πÉ‡∏ä‡πâ CSRF Protection
- ‚úÖ Sanitize user input ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•

#### Performance

- ‚úÖ ‡πÉ‡∏ä‡πâ Eager Loading ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô N+1 Problem
- ‚úÖ ‡πÉ‡∏ä‡πâ Cache ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡πà‡∏≠‡∏¢
- ‚úÖ ‡πÉ‡∏ä‡πâ Pagination ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ß
- ‚úÖ Optimize Database Queries

```php
// ‚ùå Bad - N+1 Problem
$articles = Article::all();
foreach ($articles as $article) {
    echo $article->user->name; // Query ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏£‡∏≠‡∏ö
}

// ‚úÖ Good - Eager Loading
$articles = Article::with('user')->get();
foreach ($articles as $article) {
    echo $article->user->name; // ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß
}
```

#### Code Organization

- ‚úÖ ‡πÉ‡∏ä‡πâ Form Request ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö validation ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á Service Class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö business logic ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
- ‚úÖ ‡πÉ‡∏ä‡πâ Events ‡πÅ‡∏•‡∏∞ Listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö side effects
- ‚úÖ ‡πÉ‡∏ä‡πâ Jobs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô

### 4. Common Tasks

#### ‡πÄ‡∏û‡∏¥‡πà‡∏° Admin User ‡πÉ‡∏´‡∏°‡πà

```bash
php artisan tinker
```

```php
$user = new App\Models\User();
$user->name = 'Admin Name';
$user->email = 'admin@example.com';
$user->password = Hash::make('password');
$user->role = 'admin';
$user->email_verified_at = now();
$user->save();
```

#### Clear All Caches

```bash
php artisan cache:clear
php artisan config:clear
php artisan route:clear
php artisan view:clear
```

#### Reset Database

```bash
php artisan migrate:fresh --seed
```

**‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô**: ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î!

---

## API ‡πÅ‡∏•‡∏∞ Helper Functions

### Helper Functions

#### setting()

‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

```php
setting(string $key, mixed $default = null): mixed
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**:

```blade
{{ setting('site_name') }}
{{ setting('site_name', 'Default Name') }}
{{ setting('contact_email', 'info@example.com') }}
```

#### settings()

‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°

```php
settings(string $group): array
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**:

```php
$generalSettings = settings('general');
// [
//     'site_name' => 'NBU Knowledge Base',
//     'site_description' => '...',
//     'items_per_page' => '12',
// ]

$socialSettings = settings('social');
// [
//     'social_facebook' => 'https://...',
//     'social_twitter' => 'https://...',
// ]
```

### Model Methods

#### User Model

```php
// Check roles
$user->isAdmin(): bool
$user->isEditor(): bool
$user->isContributor(): bool
$user->isViewer(): bool

// Permissions
$user->canManageArticles(): bool
$user->canEditArticle(Article $article): bool

// Relationships
$user->department(): BelongsTo
$user->articles(): HasMany
$user->bookmarks(): HasMany
```

#### Article Model

```php
// Visibility checks
$article->isPublic(): bool
$article->isMembersOnly(): bool
$article->isStaffOnly(): bool
$article->isInternal(): bool
$article->isPrivate(): bool

// Status checks
$article->isDraft(): bool
$article->isPublished(): bool
$article->isArchived(): bool

// Relationships
$article->user(): BelongsTo
$article->category(): BelongsTo
$article->tags(): BelongsToMany
$article->attachments(): HasMany
$article->bookmarkedBy(): BelongsToMany

// Scopes
Article::published()->get()
Article::visible($user)->get()
```

#### Setting Model

```php
// Get setting value
Setting::get(string $key, mixed $default = null): mixed

// Set setting value
Setting::set(string $key, mixed $value): void

// Get all settings in a group
Setting::getByGroup(string $group): array

// Clear all settings cache
Setting::clearCache(): void
```

---

## ‡∏Å‡∏≤‡∏£ Deploy

### Production Checklist

- [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `APP_ENV` ‡πÄ‡∏õ‡πá‡∏ô `production`
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `APP_DEBUG` ‡πÄ‡∏õ‡πá‡∏ô `false`
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á `APP_KEY` ‡πÉ‡∏´‡∏°‡πà
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Database credentials ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ MAIL credentials ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Admin ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ permissions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `storage/` ‡πÅ‡∏•‡∏∞ `bootstrap/cache/`
- [ ] ‡∏£‡∏±‡∏ô `php artisan config:cache`
- [ ] ‡∏£‡∏±‡∏ô `php artisan route:cache`
- [ ] ‡∏£‡∏±‡∏ô `php artisan view:cache`
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Queue Worker (‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ SSL/TLS Certificate
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Backup ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### Environment Variables ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production

```env
APP_NAME="NBU Knowledge Base"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://yourdomain.com

DB_CONNECTION=pgsql
DB_HOST=your-db-host
DB_PORT=5432
DB_DATABASE=your-db-name
DB_USERNAME=your-db-user
DB_PASSWORD=your-secure-password

MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="your-email@gmail.com"
MAIL_FROM_NAME="${APP_NAME}"
```

---

## ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Troubleshooting)

### ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏™‡πà‡∏á

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `.env` ‡∏°‡∏µ `MAIL_ENCRYPTION=tls`
2. Clear config cache: `php artisan config:clear`
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏î‡πâ‡∏ß‡∏¢ tinker:

```php
Mail::raw('Test', function($msg) {
    $msg->to('test@example.com')->subject('Test');
});
```

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `$fillable` ‡πÉ‡∏ô Model
2. Clear cache: `Setting::clearCache()`
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö permissions ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `storage/`

### Visibility Level ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Database Enum ‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Check Constraint
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Policy logic
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Controller validation

---

## License

This project is open-sourced software licensed under the MIT license.

---

## Support

‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:
- Email: kms@northbkk.ac.th
- ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏ô‡∏≠‡∏£‡πå‡∏ó‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û

---

**Developed for North Bangkok University**

**¬© 2025 North Bangkok University. All rights reserved.**
